<!DOCTYPE HTML>

<html>
	<head>
		<title>E-tube</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="html5\assets\css\main.css" />
		<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-storage.js"></script>
		<script src="googlelogin.js?useEmulator=true"></script>
		<style>
		ul, li{
        list-style:none;
        padding:0;
        margin:0;
			}
		#liSearchOption {clear:both;}
		#liSearchOption > div {
				margin:0 auto;
				margin-top: 30px;
				width:auto;
				height:100px;

			}
		</style>
		</div>
		<script>
		function resize(img){

		   var width = img.width;
		   var height = img.height;

		   var maxWidth = 160;
		   var maxHeight = 120;

		   if(width > maxWidth || height > maxHeight){

		      if(width > height){
		         resizeWidth = maxWidth;
		         resizeHeight = (height * resizeWidth) / width;

		      }else{
		         resizeHeight = maxHeight;
		         resizeWidth = (width * resizeHeight) / height;
		      }

		   }else{
		      resizeWidth = width;
		      resizeHeight = height;
		   }

		   img.width = resizeWidth;
		   img.height = resizeHeight;
		}

		function initApp(){
			firebase.auth().onAuthStateChanged(function(user) {
					if (user) {
						console.log("로그인 상태");
						name = user.displayName;
						email = user.email;
						photoUrl = user.photoURL;
						emailVerified = user.emailVerified;
						uid = user.uid;
			temp = location.href.split("?");

			var channelRef_user = firebase.database().ref('userInfo/'+uid+'/channel_info');
			channelRef_user.once('value', (snapshot)=>{

				snapshot.forEach((childSnapshot) => {
				var childKey = childSnapshot.key;
				var childData = childSnapshot.val();
				var url = childData.imgpath;
				if(childData.name==temp[1]){
					var img1 = document.getElementById("img1");
					img1.src = url;

					var h2 = document.getElementById("h2_1");
					h2.innerHTML=childData.name;

					var a1 = document.getElementById("a1");
					a1.setAttribute("href", "upload.html?"+childData.name);
					a1.innerHTML="영상 업로드";
				}else{

				}

				});

			});

		}else{
			console.log("로그아웃 상태");
		}


		});

		}

		function goodok(){
			alert("구독되었습니다.");
		}

		window.onload=function(){
			initApp();
		}

		</script>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
	<!-- Header -->
<div class="inner">
	<header id="header">
		<a href="index.html" class="logo"><h1>E-tube</h1> </a>

		<!-- Search -->
		<section id="search" class="alt">
			<form method="post" action="#">
				<input type="text" name="query" id="query" placeholder="Search" />
			</form>
		</section>

		<ul class="icons">
			<li>
				<a id="logURL" href="" class="fa fa-user-circle fa-lg">
				<span class="label" style="color:#3D4449">로그인</span>
				<script>
				switch (localStorage.getItem("logined")) {
					case 'logined':
						document.getElementById("logURL").innerHTML="마이페이지";
						document.getElementById("logURL").setAttribute('href', 'mychannel.html');
						break;
					case '':
						document.getElementById("logURL").innerHTML="로그인";
						document.getElementById("logURL").setAttribute('href', "javascript:openWindowPop('login.html', 'popup');");
						break;
					default:

				}
				</script>
				</a>
		</li>
		</ul>

	</header>

				<!-- Main -->
					<div id="main">
						<div class="" style="margin-top: 2em; height: 160px; position:relative; ">

							<!-- Section -->

                <div class="image-container" style="height: 120px; width: 160px; float:left; overflow:hidden; display:flex; align-items: center; justify-content: center; margin:20px">
                  <a href="#" class="test"> <img id="img1" src="#" onload=resize(this)></img> </a>
                </div>
              	<div style="height: 120px; width: 400px; left:160px; width:30%; position:absolute;margin:20px;">
								  <a href="#" onclick="goodok();">
										<h2 id="h2_1"style="margin-top:5px; margin-left:15px">구독</h2>
									</a>
										<p style="margin-left:15px">구독자수, 영상수<br>
										<a href="#">채널주인스펙확인</a></p>

								</div>

                <div style="height: 120px; width: 100px; float:right;margin:20px;">
                  <ul class="actions" style="margin-top:40px;" >
                    <li><a id="a1" href="" class="button">-</a></li>
                  </ul>
                </div>


            </div>

                <nav style=" height:50px; width:100%; margin-top:10px;  ">
  									<ul style="list-style-type:none; margin:0px; padding:0px">
											<li style="float:left; width:20%;height:100%;line-height:50px;vertical-align:middle; position:relative; text-align:center;"><a href="#" style="color:#3D4449"><p>강의영상</p></a></li>
											<li style="float:left; width:20%;height:100%;line-height:50px;vertical-align:middle; position:relative;text-align:center;"><a href="#" style="color:#3D4449"><p>재생목록</p></a></li>
											<li style="float:left; width:60%;height:100%;line-height:50px;" id="search" class="alt">
												<form method="post" action="#" style="margin:4.5px">
													<input type="text" name="query" id="query" placeholder="Search" />
												</form>
				              </li>
										</ul>
								</nav>

								<li id='liSearchOption'>
										<div style=" margin:0px; float:left;">
												<select id='selSearchOption' >
														<option value='A'>최신순</option>
														<option value='T'>조회순</option>
														<option value='C'>추천순</option>
												</select>

										</div>
								</li>


								<div class="inner" >
									<!--
									<section>
				  					<div class="" style="margin-top:5px; height:240px; position:relative; background-color:#F1F1F1 ">
											<div class="image-container" style="height:200px; width:350px; float:left; overflow:hidden; display:flex; align-items: center; justify-content: center; margin:20px; position:absolute">
												<a href="#" class="test"> <img src="https://ichef.bbci.co.uk/news/640/cpsprodpb/17805/production/_105016269_roxy1.jpg"></img> </a>
											</div>
											<div style="height: 200px;left:350px; width:40%; position:absolute; margin:20px">
					  						<a href="#" >
													<h2 style="margin-top:10px; margin-left:10px">고양이 샤워시키는 방법</h2>
												</a>
												<p style="margin-left:10px;">조회수,추천수<br>
													영상업로드날짜<br>
												<a href="#">강의 자료 링크</a></p>

												<div style="margin:10px" class="conatiner">
													<div class="prog" style="background:#FFFFFF">
														<div class="progs" id="progressing" style="width:0%; height:30px; background:#FF8080;color:#fff;text-align: center;line-height: 30px;" ></div>
													</div>
												</div>

												<script>
        									function moveBtn(){
            							var ele=document.getElementById('progressing');
            							var width = 5;
            							var id =setInterval(frame, 45);
            							function frame(){
                						if(width>=100){
                    					clearInterval(id);
                						}else{
                    					width ++;
                    					ele.style.width=width+"%";
                    					ele.innerHTML=width+"%";
                							}
            								}
        									}
    										</script>
											</div>

											<div style="height: 200px; width: 100px; float:right;margin:20px;">
												<button style="margin-top:70px;" onClick="moveBtn()">test</button>
											</div>
										</div>
									</section>
								-->
								</div>
					</div>
				</div>
			</div>

			<div id="sidebar">
			<div class="inner">

				<!-- Menu -->
					<nav id="menu">
						<header class="major">
							<h2>카테고리</h2>
						</header>
						<ul>
							<li>
								<span class="opener">스포츠</span>
								<ul>
									<li><a href="#">농구</a></li>
									<li><a href="#">야구</a></li>
									<li><a href="#">축구</a></li>
									<li><a href="#">수영</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">음악</span>
								<ul>
									<li><a href="#">피아노</a></li>
									<li><a href="#">기타</a></li>
									<li><a href="#">플룻</a></li>
									<li><a href="#">바이올린</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">생활</span>
								<ul>
									<li><a href="#">청소</a></li>
									<li><a href="#">저축</a></li>
									<li><a href="#">요리</a></li>
									<li><a href="#">교육</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">컴퓨터</span>
								<ul>
									<li><a href="#">웹프로그래밍</a></li>
									<li><a href="#">데이터베이스</a></li>
									<li><a href="#">데이터통신</a></li>
									<li><a href="#">언어(자바/c++)</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">게임</span>
								<ul>
									<li><a href="#">롤</a></li>
									<li><a href="#">피파</a></li>
									<li><a href="#">메이플</a></li>
									<li><a href="#">카트라이더</a></li>
								</ul>
							</li>
							<li><a href="index.html">스터디게시판</a></li>

						</ul>
					</nav>


				</div>
			</div>
		</div>











		<!-- Scripts 아직뭔지 모르겠음-->
    <script src="html5/assets/js/jquery_main.js"></script>
    <script src="html5/assets/js/browser_main.js"></script>
    <script src="html5/assets/js/breakpoints_main.js"></script>
    <script src="html5/assets/js/util.js"></script>
    <script src="html5/assets/js/main.js"></script>
	</body>
</html>
